## Configuring the S3 bucket with Terraform

This Terraform configuration automates the creation of an S3 bucket with a random suffix to ensure uniqueness. It also enables object ownership controls to ensure bucket owners own the objects they create. The bucket is configured with a private ACL and policies to allow Kinesis to write to it.

## Pre-requisites
To use this Terraform configuration, you need the following:

1. An AWS account
2. Terraform installed on your local machine
3. AWS credentials set up on your local machine

## Configuration
To use this Terraform configuration, follow these steps:

1. Clone the repository to your local machine.
```
git clone https://github.com/AmaraOgu/aws-data-pipelines.git
```
2. Navigate to the setups directory.
```
cd setups
```
3. Open the terraform.tfvars file and configure the bucket_name variable to specify the desired name of the S3 bucket. This name will be used as a prefix for the random suffix generated by Terraform to create a unique bucket name.

## Input Variables
This s3 configuration uses the following variables:
| Name                   | Description                                    | Type   | Default |
|------------------------|------------------------------------------------|--------|---------|
| bucket_name            | s3 Bucket name prefix                          | string |         |

Note: the bucket_name will serve as a prefix. A random suffix is generated by Terraform to create a unique bucket name.  

## Output
This s3 configuration provides the following output:
| Name                   | Description                                    | Type   | Default |
|------------------------|------------------------------------------------|--------|---------|
| bucket_arn             | The ARN of the created s3 bucket               | string |         |
| s3_bucket_name         | The name of the created s3 bucket              | string |         |

## Usage
1. Change into the directory:
```
cd setups
```
2. Initialize the working directory:  
```
terraform init
```  
3. Plan the changes: use '-target' to specify the module you want to create 
-target=module.data-s3-bucket 
```
terraform plan -target=module.data-s3-bucket 
```

4. Apply the changes: use '-target' to specify the module you want to create 
-target=module.data-s3-bucket 
```
terraform apply -target=module.data-s3-bucket 
```

5. When you are finished, destroy the infrastructure:
```
terraform destroy 
```
or 
```
terraform destroy --auto-approve
```

## Additional configurations 
To modify the configuration of the S3 bucket, you can make changes to the s3_bucket.tf or bucket_iam.tf file. For example, you can add or modify policies to grant different permissions to AWS services or modify the ACL to change the bucket's access level.
